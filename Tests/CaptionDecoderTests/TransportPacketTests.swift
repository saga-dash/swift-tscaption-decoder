// 
//  TransportPacketTests.swift
//  CaptionDecoderTests
//
//  Created by saga-dash on 2018/07/10.
//


import XCTest
import Foundation
@testable import CaptionDecoderLib

extension TransportPacketTests {
    static var allTests : [(String, (TransportPacketTests) -> () throws -> Void)] {
        return [
            ("testPAT", testPAT),
        ]
    }
}

final class TransportPacketTests: XCTestCase {
    override func setUp() {
    }
    func testPAT() throws {
        let bytes: [UInt8] = [
            0x47, 0x60, 0x0, 0x19, 0x0, 0x0, 0xb0, 0x11, 0x40, 0x31, 0xc3, 0x0, 0x0, 0x0, 0x0, 0xe0,
            0x10, 0x0, 0x67, 0xe1, 0xf0, 0xfa, 0x74, 0xbb, 0x60, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
            0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
        ]
        let data = Data(bytes: bytes)
        let header = TransportPacket(data)
        print(header)
        XCTAssertTrue(header.syncByte == 0x47)
    }
}
